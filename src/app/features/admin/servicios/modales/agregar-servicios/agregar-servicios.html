<div class="p-6 bg-white rounded-2xl shadow-2xl border border-gray-200 relative max-h-[85vh] overflow-y-auto custom-scroll">
  <button (click)="cancelar()" class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 transition-all">
    <mat-icon>close</mat-icon>
  </button>

  <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
    <mat-icon class="text-[#F7A428]">add_circle</mat-icon>
    Agregar Servicio
  </h2>

  <form [formGroup]="servicioForm" (ngSubmit)="guardarServicio()" class="space-y-4">

    <div>
      <label for="categoria" class="block text-sm font-medium text-gray-700">Categoría</label>
      <select
        id="categoria"
        formControlName="id_categoria"
        (change)="onCategoriaChange()"
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-[#F7A428] focus:ring focus:ring-[#F7A428]/50 p-2 bg-white"
      >
        <option value="">Seleccione una categoría</option>
        <option *ngFor="let cat of categorias" [value]="cat._id">{{ cat.nombre }}</option>
      </select>
    </div>

    <div *ngIf="subcategorias.length > 0">
      <label for="subcategoria" class="block text-sm font-medium text-gray-700">Subcategoría</label>
      <select
        id="subcategoria"
        formControlName="id_subcategoria"
        (change)="onSubcategoriaChange()"
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-[#F7A428] focus:ring focus:ring-[#F7A428]/50 p-2 bg-white"
      >
        <option value="">Seleccione una subcategoría</option>
        <option *ngFor="let sub of subcategorias" [value]="sub._id">{{ sub.nombre }}</option>
      </select>

      <div *ngIf="descripcionSubcategoria" class="mt-2 p-2 border border-gray-300 rounded-md bg-gray-50 text-gray-800">
        <p class="text-sm italic">{{ descripcionSubcategoria }}</p>
      </div>
    </div>

    <div>
      <label for="imagen_url" class="block text-sm font-medium text-gray-700">Imagen (URL)</label>
      <input
        type="url"
        id="imagen_url"
        formControlName="imagen_url"
        placeholder="https://ejemplo.com/imagen.jpg"
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-[#F7A428] focus:ring focus:ring-[#F7A428]/50 p-2"
      />
    </div>

    <div class="flex justify-end gap-3 pt-4">
      <button type="button" (click)="cancelar()" class="px-5 py-2 rounded-xl font-semibold border border-gray-300 text-gray-700 hover:bg-gray-100 transition-all">
        Cancelar
      </button>

      <button
        type="submit"
        [disabled]="!servicioForm.valid"
        class="px-5 py-2 rounded-xl font-semibold bg-[#F7A428] text-white hover:bg-[#e69320] shadow-md transition-all disabled:opacity-60 disabled:cursor-not-allowed"
      >
        <mat-icon class="text-white align-middle mr-1">save</mat-icon>
        Guardar Servicio
      </button>
    </div>

  </form>
</div>

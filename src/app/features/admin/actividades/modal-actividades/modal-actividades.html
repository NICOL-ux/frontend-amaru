<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
  <div class="relative w-full max-w-2xl max-h-[90vh] overflow-hidden">
    
    <!-- Efecto de borde gradiente exterior -->
    <div class="absolute -inset-4 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-3xl blur-xl opacity-30 animate-pulse-slow"></div>
    
    <!-- Contenedor principal del modal -->
    <div class="relative bg-gradient-to-br from-gray-900/95 to-black/95 backdrop-blur-xl rounded-2xl border border-white/10 shadow-2xl overflow-hidden">
      
      <!-- Header del modal -->
      <div class="relative p-6 border-b border-white/10 bg-gradient-to-r from-indigo-500/5 to-purple-500/5">
        <!-- Efecto de brillo en el header -->
        <div class="absolute inset-0 bg-gradient-to-r from-indigo-500/10 to-purple-500/10 opacity-0 hover:opacity-100 transition-opacity duration-300"></div>
        
        <div class="relative flex items-center justify-between">
          <!-- Título -->
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-gradient-to-r from-indigo-500/20 to-purple-500/20 rounded-xl border border-white/10 flex items-center justify-center">
              <mat-icon class="text-xl bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-purple-400">assignment</mat-icon>
            </div>
            <div>
              <h2 class="text-2xl font-black bg-clip-text text-transparent bg-gradient-to-r from-indigo-300 to-purple-300">
                {{ modoEdicion ? 'Editar Actividad' : 'Nueva Actividad' }}
              </h2>
              <p class="text-sm text-gray-400 mt-1">
                {{ modoEdicion ? 'Actualiza la información de la actividad' : 'Completa los datos para crear una nueva actividad' }}
              </p>
            </div>
          </div>
          
          <!-- Botón de cerrar -->
          <button 
            (click)="cerrarModal()" 
            class="w-10 h-10 bg-gradient-to-br from-gray-800/60 to-black/80 rounded-xl border border-white/10 text-gray-400 hover:text-white hover:border-red-500/30 transition-all duration-300 flex items-center justify-center group">
            <mat-icon class="text-lg group-hover:scale-110 transition-transform">close</mat-icon>
          </button>
        </div>
      </div>

      <!-- Contenido del formulario con scroll -->
      <div class="overflow-y-auto custom-scrollbar max-h-[60vh]">
        <div class="p-6">
          <form (ngSubmit)="guardarActividad()" #actividadForm="ngForm" class="space-y-6">
            
            <!-- Campo Nombre -->
            <div class="relative group">
              <div class="absolute -inset-2 bg-gradient-to-r from-indigo-500/10 to-purple-500/10 rounded-2xl blur opacity-0 group-focus-within:opacity-100 transition-opacity duration-300"></div>
              
              <div class="relative">
                <label for="nombre" class="block text-sm font-medium text-gray-300 mb-2 flex items-center gap-2">
                  <mat-icon class="text-indigo-400 text-lg">title</mat-icon>
                  Nombre de la Actividad *
                </label>
                <input
                  type="text"
                  id="nombre"
                  name="nombre"
                  [(ngModel)]="nuevaActividad.nombre"
                  required
                  minlength="3"
                  maxlength="100"
                  #nombre="ngModel"
                  [class.border-red-500/50]="nombre.invalid && nombre.touched"
                  [class.border-green-500/50]="nombre.valid && nombre.touched"
                  class="w-full bg-gradient-to-br from-gray-800/60 to-black/80 backdrop-blur-sm border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-400
                         focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/30
                         transition-all duration-300 group-focus-within:border-indigo-500/30"
                  placeholder="Ingresa el nombre descriptivo de la actividad"
                />
                
                <!-- Indicador de validación -->
                <div class="absolute right-3 top-1/2 transform -translate-y-1/2">
                  <div *ngIf="nombre.valid && nombre.touched" class="w-2 h-2 bg-green-500 rounded-full"></div>
                  <div *ngIf="nombre.invalid && nombre.touched" class="w-2 h-2 bg-red-500 rounded-full"></div>
                  <div *ngIf="!nombre.touched" class="w-2 h-2 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full opacity-0 group-focus-within:opacity-100 transition-opacity duration-300"></div>
                </div>

                <!-- Mensajes de error -->
                <div *ngIf="nombre.invalid && nombre.touched" class="mt-2 space-y-1">
                  <p *ngIf="nombre.errors?.['required']" class="text-xs text-red-400 flex items-center gap-1">
                    <mat-icon class="text-xs">error</mat-icon>
                    El nombre es obligatorio
                  </p>
                  <p *ngIf="nombre.errors?.['minlength']" class="text-xs text-red-400 flex items-center gap-1">
                    <mat-icon class="text-xs">error</mat-icon>
                    Mínimo 3 caracteres (actual: {{ nombre.value?.length || 0 }})
                  </p>
                  <p *ngIf="nombre.errors?.['maxlength']" class="text-xs text-red-400 flex items-center gap-1">
                    <mat-icon class="text-xs">error</mat-icon>
                    Máximo 100 caracteres
                  </p>
                </div>
              </div>
            </div>

            <!-- Campo Descripción -->
            <div class="relative group">
              <div class="absolute -inset-2 bg-gradient-to-r from-indigo-500/10 to-purple-500/10 rounded-2xl blur opacity-0 group-focus-within:opacity-100 transition-opacity duration-300"></div>
              
              <div class="relative">
                <label for="descripcion" class="block text-sm font-medium text-gray-300 mb-2 flex items-center gap-2">
                  <mat-icon class="text-purple-400 text-lg">description</mat-icon>
                  Descripción *
                </label>
                <textarea
                  id="descripcion"
                  name="descripcion"
                  [(ngModel)]="nuevaActividad.descripcion"
                  required
                  minlength="10"
                  maxlength="500"
                  #descripcion="ngModel"
                  [class.border-red-500/50]="descripcion.invalid && descripcion.touched"
                  [class.border-green-500/50]="descripcion.valid && descripcion.touched"
                  rows="4"
                  class="w-full bg-gradient-to-br from-gray-800/60 to-black/80 backdrop-blur-sm border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-400
                         focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/30
                         transition-all duration-300 group-focus-within:border-indigo-500/30 resize-none custom-scrollbar"
                  placeholder="Describe los detalles, objetivos y características de la actividad..."
                ></textarea>
                
                <!-- Contador de caracteres con validación visual -->
                <div class="absolute bottom-2 right-2 text-xs"
                     [class.text-green-400]="descripcion.valid && descripcion.touched"
                     [class.text-red-400]="descripcion.invalid && descripcion.touched"
                     [class.text-gray-400]="!descripcion.touched">
                  {{ nuevaActividad.descripcion?.length || 0 }}/500
                </div>

                <!-- Mensajes de error -->
                <div *ngIf="descripcion.invalid && descripcion.touched" class="mt-2 space-y-1">
                  <p *ngIf="descripcion.errors?.['required']" class="text-xs text-red-400 flex items-center gap-1">
                    <mat-icon class="text-xs">error</mat-icon>
                    La descripción es obligatoria
                  </p>
                  <p *ngIf="descripcion.errors?.['minlength']" class="text-xs text-red-400 flex items-center gap-1">
                    <mat-icon class="text-xs">error</mat-icon>
                    Mínimo 10 caracteres (actual: {{ descripcion.value?.length || 0 }})
                  </p>
                  <p *ngIf="descripcion.errors?.['maxlength']" class="text-xs text-red-400 flex items-center gap-1">
                    <mat-icon class="text-xs">error</mat-icon>
                    Máximo 500 caracteres
                  </p>
                </div>
              </div>
            </div>

            <!-- Indicador de estado de envío -->
            <div *ngIf="enviando" class="relative">
              <div class="flex items-center justify-center gap-3 p-4 bg-indigo-500/10 rounded-xl border border-indigo-500/20">
                <div class="w-6 h-6 border-2 border-indigo-400 border-t-transparent rounded-full animate-spin"></div>
                <span class="text-sm text-indigo-300 font-medium">
                  {{ modoEdicion ? 'Actualizando actividad...' : 'Creando actividad...' }}
                </span>
              </div>
            </div>

            <!-- Campos adicionales (opcionales para futura expansión) -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              
              <!-- Tipo de Actividad (placeholder para futuro) -->
              <div class="relative group">
                <div class="absolute -inset-2 bg-gradient-to-r from-indigo-500/10 to-purple-500/10 rounded-2xl blur opacity-0 group-focus-within:opacity-100 transition-opacity duration-300"></div>
                
                <div class="relative">
                  <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center gap-2">
                    <mat-icon class="text-pink-400 text-lg">category</mat-icon>
                    Tipo de Actividad
                  </label>
                  <div class="w-full bg-gradient-to-br from-gray-800/60 to-black/80 backdrop-blur-sm border border-white/10 rounded-xl px-4 py-3 text-gray-400">
                    <span class="text-sm">Taller / Evento / Curso</span>
                  </div>
                  <div class="absolute right-3 top-1/2 transform -translate-y-1/2">
                    <mat-icon class="text-gray-500">lock</mat-icon>
                  </div>
                </div>
              </div>

              <!-- Estado (placeholder para futuro) -->
              <div class="relative group">
                <div class="absolute -inset-2 bg-gradient-to-r from-indigo-500/10 to-purple-500/10 rounded-2xl blur opacity-0 group-focus-within:opacity-100 transition-opacity duration-300"></div>
                
                <div class="relative">
                  <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center gap-2">
                    <mat-icon class="text-blue-400 text-lg">toggle_on</mat-icon>
                    Estado
                  </label>
                  <div class="w-full bg-gradient-to-br from-gray-800/60 to-black/80 backdrop-blur-sm border border-white/10 rounded-xl px-4 py-3 text-gray-400">
                    <span class="text-sm">Activo</span>
                  </div>
                  <div class="absolute right-3 top-1/2 transform -translate-y-1/2">
                    <mat-icon class="text-gray-500">lock</mat-icon>
                  </div>
                </div>
              </div>
            </div>

            <!-- Información de campos futuros -->
            <div class="relative group/info">
              <div class="absolute -inset-2 bg-gradient-to-r from-gray-500/5 to-gray-600/5 rounded-2xl blur opacity-0 group-hover/info:opacity-100 transition-opacity duration-300"></div>
              
              <div class="relative bg-gradient-to-br from-gray-800/40 to-black/60 backdrop-blur-sm rounded-xl border border-white/10 p-4">
                <div class="flex items-start gap-3">
                  <div class="w-8 h-8 bg-gradient-to-r from-indigo-500/20 to-purple-500/20 rounded-lg border border-white/10 flex items-center justify-center flex-shrink-0">
                    <mat-icon class="text-indigo-400 text-sm">info</mat-icon>
                  </div>
                  <div>
                    <h4 class="text-sm font-medium text-gray-300 mb-1">Funcionalidades Futuras</h4>
                    <p class="text-xs text-gray-400 leading-relaxed">
                      Próximamente se agregarán más campos como tipo de actividad, estado, fechas, 
                      ubicación, imagen y categorías para una gestión más completa.
                    </p>
                  </div>
                </div>
              </div>
            </div>

          </form>
        </div>
      </div>

      <!-- Footer del modal -->
      <div class="relative p-6 border-t border-white/10 bg-gradient-to-r from-indigo-500/5 to-purple-500/5">
        <div class="flex justify-end gap-3">
          <!-- Botón Cancelar -->
          <div class="relative group">
            <div class="absolute -inset-1 bg-gradient-to-r from-gray-500/10 to-gray-600/10 rounded-2xl blur opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            <button
              type="button"
              (click)="cerrarModal()"
              [disabled]="enviando"
              class="relative px-6 py-3 bg-gradient-to-br from-gray-800/60 to-black/80 backdrop-blur-sm rounded-2xl border border-white/10 
                     text-gray-300 hover:text-white hover:border-gray-500/30 transition-all duration-300 font-semibold flex items-center gap-2
                     disabled:opacity-50 disabled:cursor-not-allowed"
            >
              <mat-icon class="text-lg">cancel</mat-icon>
              Cancelar
            </button>
          </div>

          <!-- Botón Guardar -->
          <div class="relative group">
            <div class="absolute -inset-1 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-2xl blur opacity-30 group-hover:opacity-50 transition-opacity duration-300"></div>
            <button
              type="submit"
              [disabled]="!actividadForm.valid || enviando"
              (click)="guardarActividad()"
              class="relative px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-2xl border border-indigo-500/30
                     hover:shadow-lg hover:shadow-indigo-500/25 transform hover:scale-105 transition-all duration-300 font-semibold
                     disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:shadow-none flex items-center gap-2"
            >
              <mat-icon class="text-lg">{{ modoEdicion ? 'update' : 'add_task' }}</mat-icon>
              {{ enviando ? 'Procesando...' : (modoEdicion ? 'Actualizar Actividad' : 'Crear Actividad') }}
            </button>
          </div>
        </div>
      </div>

      <!-- Elementos decorativos de esquina -->
      <div class="absolute top-0 left-0 w-6 h-6 border-t-2 border-l-2 border-indigo-500/40 rounded-tl-2xl"></div>
      <div class="absolute top-0 right-0 w-6 h-6 border-t-2 border-r-2 border-purple-500/40 rounded-tr-2xl"></div>
      <div class="absolute bottom-0 left-0 w-6 h-6 border-b-2 border-l-2 border-indigo-500/40 rounded-bl-2xl"></div>
      <div class="absolute bottom-0 right-0 w-6 h-6 border-b-2 border-r-2 border-purple-500/40 rounded-br-2xl"></div>
    </div>
  </div>
</div>